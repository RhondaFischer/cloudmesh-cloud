

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>AWS cm &mdash; cm4 alpha documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="CM4 REST Api" href="ufo.html" />
    <link rel="prev" title="Cloudmesh cm v4" href="README.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> cm4
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Cloudmesh cm v4</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">AWS cm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#code-description">Code Description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cloudmesh-yaml">cloudmesh.yaml</a></li>
<li class="toctree-l3"><a class="reference internal" href="#o-suggestion-for-redesign">:o: Suggestion for Redesign</a></li>
<li class="toctree-l3"><a class="reference internal" href="#awscm-py">awscm.py</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#add-resources">Add resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#list-resources">List Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remove-resources">Remove Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#view-resources">View Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#copy-instances-from-file">Copy Instances from File</a></li>
<li class="toctree-l4"><a class="reference internal" href="#copy-instances-from-folder">Copy Instances from Folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#copy-instances">Copy Instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="#delete-instances-from-file">Delete Instances from file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#delete-instances-from-folder">Delete Instances from Folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-instances-from-folder">Create instances from folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#read-instances-from-folder">Read Instances from Folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#download-instances-from-file">Download INstances from file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#download-instances-from-folder">Download instances from folder</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#check-instances">Check instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-instances-locally">Run instances locally</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-instances-remotely">Run instances remotely</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-local">Run local</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-local">Run local</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#config-py">config.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="#resource-py">resource.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="#utility-py">utility.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-py">run.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="#advanced-py">advanced.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#todo-spark">TODO - Spark</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ufo.html">CM4 REST Api</a></li>
<li class="toctree-l1"><a class="reference internal" href="vagrant.html">ehvagrant: enhanced Vagrant interface with importable python module</a></li>
<li class="toctree-l1"><a class="reference internal" href="vcluster.html">Virtual Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="vm.html">VM Description</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cm4</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>AWS cm</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/aws.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="aws-cm">
<span id="aws-cm"></span><h1>AWS cm<a class="headerlink" href="#aws-cm" title="Permalink to this headline">¶</a></h1>
<p>The code is designed for using awscm.py to access the aws
instance and run scripts in it.</p>
<p>In the code, we provide these commands for achieving the goal of
conducting benchmarks on remote machines.</p>
<div class="section" id="code-description">
<span id="code-description"></span><h2>Code Description<a class="headerlink" href="#code-description" title="Permalink to this headline">¶</a></h2>
<p>In the awscm folder, there are several basic python files:</p>
<div class="section" id="cloudmesh-yaml">
<span id="cloudmesh-yaml"></span><h3>cloudmesh.yaml<a class="headerlink" href="#cloudmesh-yaml" title="Permalink to this headline">¶</a></h3>
<p>This file contains the property of each instance, especially the AWS
instance. In AWS cm, we only concern about the block of
information in “cloud” part.</p>
<p>In the properties of one aws instance, we need users to specify the
“name” and “label” of the instance. In the “credentials” part, we need
users to fill in the “KEY” and “ID”. Make sure there are no duplicated
names and labels in the “aws” list.</p>
</div>
<div class="section" id="o-suggestion-for-redesign">
<span id="o-suggestion-for-redesign"></span><h3>:o: Suggestion for Redesign<a class="headerlink" href="#o-suggestion-for-redesign" title="Permalink to this headline">¶</a></h3>
<p>I propose to redising and use the old cloudmesh interface in this new
implementation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cm4</span> <span class="n">aws</span> <span class="n">vm</span> <span class="nb">list</span>
<span class="n">cm4</span> <span class="n">cloud</span><span class="o">=</span><span class="n">aws</span>
<span class="c1"># all subsequent commands are done on aws without the ned to specify the cloud</span>
<span class="n">cm4</span> <span class="n">group</span><span class="o">=</span><span class="n">cluster1</span>
<span class="c1"># all subsequent commands are added to the group. The last group is set to group1, a group can have arbitrary resources in it vms, files, ...</span>
<span class="c1"># commands applied to last vm </span>
<span class="n">cm4</span> <span class="n">vm</span> <span class="n">start</span> <span class="p">[</span><span class="o">--</span><span class="n">cloud</span><span class="o">=</span><span class="n">CLOUD</span><span class="p">]</span>
<span class="n">cm4</span> <span class="n">vm</span> <span class="n">stop</span> <span class="p">[</span><span class="o">--</span><span class="n">cloud</span><span class="o">=</span><span class="n">CLOUD</span><span class="p">]</span>
<span class="n">cm4</span> <span class="n">vm</span> <span class="n">info</span> <span class="p">[</span><span class="o">--</span><span class="n">cloud</span><span class="o">=</span><span class="n">CLOUD</span><span class="p">]</span>
<span class="n">cm4</span> <span class="n">vm</span> <span class="n">delete</span> <span class="p">[</span><span class="o">--</span><span class="n">cloud</span><span class="o">=</span><span class="n">CLOUD</span><span class="p">]</span>
<span class="n">cm4</span> <span class="n">vm</span> <span class="n">suspend</span> <span class="p">[</span><span class="o">--</span><span class="n">cloud</span><span class="o">=</span><span class="n">CLOUD</span><span class="p">]</span>
<span class="c1">#</span>
<span class="n">cm4</span> <span class="n">group</span> <span class="nb">list</span> <span class="p">[</span><span class="o">--</span><span class="n">group</span><span class="o">=</span><span class="n">GROUP</span><span class="p">]</span>
<span class="n">cm4</span> <span class="n">group</span> <span class="n">delete</span> <span class="p">[</span><span class="o">--</span><span class="n">group</span><span class="o">=</span><span class="n">GROUP</span><span class="p">]</span>

<span class="n">MongoDB</span> <span class="ow">is</span> <span class="n">used</span> <span class="n">to</span> <span class="n">manage</span> <span class="n">the</span> <span class="n">data</span>

<span class="n">cm4</span> <span class="n">save</span> <span class="p">[</span><span class="o">--</span><span class="n">file</span><span class="o">=</span><span class="n">FILE</span><span class="p">]</span>
<span class="n">cm4</span> <span class="n">load</span> <span class="p">[</span><span class="o">--</span><span class="n">file</span><span class="o">=</span><span class="n">FILE</span><span class="p">]</span>

<span class="n">makesa</span> <span class="n">backup</span> <span class="n">of</span> <span class="n">the</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">mongo</span>

<span class="n">cm4</span> <span class="n">system</span> <span class="n">satus</span>

<span class="n">looks</span> <span class="n">at</span> <span class="n">teh</span> <span class="n">system</span> <span class="n">sattus</span> <span class="n">of</span> <span class="n">mongo</span> <span class="ow">and</span> <span class="n">other</span> <span class="n">cm4</span> <span class="n">stuff</span>

</pre></div>
</div>
<p>here are some additional thoughts, that may influence what we do:</p>
<ul class="simple">
<li><a class="reference external" href="http://cloudmesh.github.io/cmd3/man/man.html#vm">http://cloudmesh.github.io/cmd3/man/man.html#vm</a></li>
<li>There is also a newer version of cloudmesh, that we have not
implemented all of this logic but it uses cmd5</li>
</ul>
</div>
<div class="section" id="awscm-py">
<span id="awscm-py"></span><h3>awscm.py<a class="headerlink" href="#awscm-py" title="Permalink to this headline">¶</a></h3>
<p>The [<code class="docutils literal notranslate"><span class="pre">awscm.py</span></code>] is the main runable python class to start the aws
cm. It used the “docopt” to build the usage of commands.  Here are the
version 1 commands that could be used:</p>
<div class="section" id="add-resources">
<span id="add-resources"></span><h4>Add resources<a class="headerlink" href="#add-resources" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">resource</span> <span class="n">add</span> <span class="o">&lt;</span><span class="n">yaml_file</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>add extra instance information into the default yaml file. Please
follow the schema of the asw instance. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">aws_a</span><span class="p">:</span>
    <span class="n">credentials</span><span class="p">:</span> <span class="p">{</span><span class="n">EC2_ACCESS_ID</span><span class="p">:</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">EC2_SECRET_KEY</span><span class="p">:</span> <span class="s2">&quot;key&quot;</span><span class="p">}</span>
    <span class="n">label</span><span class="p">:</span> <span class="n">aws_a</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">aws_a</span>
</pre></div>
</div>
</div>
<div class="section" id="list-resources">
<span id="list-resources"></span><h4>List Resources<a class="headerlink" href="#list-resources" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">resource</span> <span class="nb">list</span> <span class="p">[</span><span class="o">--</span><span class="n">debug</span><span class="p">]</span>
</pre></div>
</div>
<p>list all instances from the default yaml file</p>
</div>
<div class="section" id="remove-resources">
<span id="remove-resources"></span><h4>Remove Resources<a class="headerlink" href="#remove-resources" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">resource</span> <span class="n">remove</span> <span class="o">&lt;</span><span class="n">label_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>remove the named or labeled instance from yaml file. Please fill in
the correct name or label. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">resource</span> <span class="n">remove</span> <span class="n">aws_a</span>
</pre></div>
</div>
</div>
<div class="section" id="view-resources">
<span id="view-resources"></span><h4>View Resources<a class="headerlink" href="#view-resources" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">resource</span> <span class="n">view</span> <span class="o">&lt;</span><span class="n">label_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>view named or labeled instance from the default yaml file. Please fill
in the correct name or label. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">view</span> <span class="n">aws_a</span>
</pre></div>
</div>
</div>
<div class="section" id="copy-instances-from-file">
<span id="copy-instances-from-file"></span><h4>Copy Instances from File<a class="headerlink" href="#copy-instances-from-file" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">copy</span> <span class="n">instance</span> <span class="o">&lt;</span><span class="n">label_name</span><span class="o">&gt;</span> <span class="n">file</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span> <span class="n">to</span> <span class="o">&lt;</span><span class="n">where</span><span class="o">&gt;</span> 
</pre></div>
</div>
<p>copy the file from local to the directory of instance. For exmaple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">copy</span> <span class="n">instance</span> <span class="n">aws_a</span> <span class="n">file</span> <span class="n">test</span><span class="o">.</span><span class="n">txt</span> <span class="n">to</span> <span class="o">/</span><span class="n">test</span><span class="o">/</span>
</pre></div>
</div>
</div>
<div class="section" id="copy-instances-from-folder">
<span id="copy-instances-from-folder"></span><h4>Copy Instances from Folder<a class="headerlink" href="#copy-instances-from-folder" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">copy</span> <span class="n">instance</span> <span class="o">&lt;</span><span class="n">label_name</span><span class="o">&gt;</span> <span class="n">foler</span> <span class="o">&lt;</span><span class="n">foler</span><span class="o">&gt;</span> <span class="n">to</span> <span class="o">&lt;</span><span class="n">where</span><span class="o">&gt;</span> 
</pre></div>
</div>
<p>copy the folder from local to the directory of instance. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">copy</span> <span class="n">instance</span> <span class="n">aws_a</span> <span class="n">folder</span> <span class="o">/</span><span class="n">test</span><span class="o">/</span> <span class="n">to</span> <span class="o">/</span><span class="n">test</span><span class="o">/</span>
</pre></div>
</div>
</div>
<div class="section" id="copy-instances">
<span id="copy-instances"></span><h4>Copy Instances<a class="headerlink" href="#copy-instances" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="nb">list</span> <span class="n">instance</span> <span class="o">&lt;</span><span class="n">label_name</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">where</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>list the files/folders in the directory of instanace. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">instance</span> <span class="n">aws_a</span> <span class="kn">from</span> <span class="o">/</span><span class="n">test</span><span class="o">/</span>
</pre></div>
</div>
</div>
<div class="section" id="delete-instances-from-file">
<span id="delete-instances-from-file"></span><h4>Delete Instances from file<a class="headerlink" href="#delete-instances-from-file" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">delete</span> <span class="n">instance</span> <span class="o">&lt;</span><span class="n">label_name</span><span class="o">&gt;</span> <span class="n">file</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">where</span><span class="o">&gt;</span> 
</pre></div>
</div>
<p>delete the file from the directory of instance. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">delete</span> <span class="n">instance</span> <span class="n">aws_a</span> <span class="n">file</span> <span class="n">text</span><span class="o">.</span><span class="n">txt</span> <span class="kn">from</span> <span class="o">/</span><span class="n">test</span><span class="o">/</span>
</pre></div>
</div>
</div>
<div class="section" id="delete-instances-from-folder">
<span id="delete-instances-from-folder"></span><h4>Delete Instances from Folder<a class="headerlink" href="#delete-instances-from-folder" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">delete</span> <span class="n">instance</span> <span class="o">&lt;</span><span class="n">label_name</span><span class="o">&gt;</span> <span class="n">folder</span> <span class="o">&lt;</span><span class="n">folder</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">where</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>delete the folder from the directory of instance. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">delete</span> <span class="n">instance</span> <span class="n">aws_a</span> <span class="n">folder</span> <span class="n">test</span> <span class="kn">from</span> <span class="o">/</span><span class="n">test</span><span class="o">/</span>
</pre></div>
</div>
</div>
<div class="section" id="create-instances-from-folder">
<span id="create-instances-from-folder"></span><h4>Create instances from folder<a class="headerlink" href="#create-instances-from-folder" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">create</span> <span class="n">instance</span> <span class="o">&lt;</span><span class="n">label_name</span><span class="o">&gt;</span> <span class="n">folder</span> <span class="o">&lt;</span><span class="n">folder</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">where</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>create a new folder in the directory of instance. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">create</span> <span class="n">instance</span> <span class="n">aws_a</span> <span class="n">folder</span> <span class="n">test</span> <span class="ow">in</span> <span class="o">/</span><span class="n">test</span><span class="o">/</span>
</pre></div>
</div>
</div>
<div class="section" id="read-instances-from-folder">
<span id="read-instances-from-folder"></span><h4>Read Instances from Folder<a class="headerlink" href="#read-instances-from-folder" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">read</span> <span class="n">instance</span> <span class="o">&lt;</span><span class="n">label_name</span><span class="o">&gt;</span> <span class="n">file</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">where</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>read the file in the directory of instance. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">read</span> <span class="n">instance</span> <span class="n">aws_a</span> <span class="n">file</span> <span class="n">test</span><span class="o">.</span><span class="n">txt</span> <span class="kn">from</span> <span class="o">/</span><span class="n">test</span><span class="o">/</span>
</pre></div>
</div>
</div>
<div class="section" id="download-instances-from-file">
<span id="download-instances-from-file"></span><h4>Download INstances from file<a class="headerlink" href="#download-instances-from-file" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">download</span> <span class="n">instance</span> <span class="o">&lt;</span><span class="n">label_name</span><span class="o">&gt;</span> <span class="n">file</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">where</span><span class="o">&gt;</span> <span class="n">to</span> <span class="o">&lt;</span><span class="n">local</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>download the file from the directory of instance to local. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">download</span> <span class="n">instance</span> <span class="n">aws_a</span> <span class="n">file</span> <span class="n">test</span><span class="o">.</span><span class="n">txt</span> <span class="kn">from</span> <span class="o">/</span><span class="n">test</span><span class="o">/</span> <span class="n">to</span> <span class="o">/</span><span class="n">test</span><span class="o">/</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="download-instances-from-folder">
<span id="download-instances-from-folder"></span><h3>Download instances from folder<a class="headerlink" href="#download-instances-from-folder" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">download</span> <span class="n">instance</span> <span class="o">&lt;</span><span class="n">label_name</span><span class="o">&gt;</span> <span class="n">folder</span> <span class="o">&lt;</span><span class="n">folder</span><span class="o">&gt;</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="n">where</span><span class="o">&gt;</span> <span class="n">to</span> <span class="o">&lt;</span><span class="n">local</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>download the folder from the directory of instance to local. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">download</span> <span class="n">instance</span> <span class="n">aws_a</span> <span class="n">folder</span> <span class="n">test</span> <span class="kn">from</span> <span class="o">/</span><span class="n">test</span><span class="o">/</span> <span class="n">to</span> <span class="o">/</span><span class="n">test</span>
</pre></div>
</div>
<div class="section" id="check-instances">
<span id="check-instances"></span><h4>Check instances<a class="headerlink" href="#check-instances" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">check</span> <span class="n">instance</span> <span class="o">&lt;</span><span class="n">label_name</span><span class="o">&gt;</span> <span class="n">process_name</span> <span class="o">&lt;</span><span class="n">process</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>check the running process in the instance. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">check</span> <span class="n">isntance</span> <span class="n">aws_a</span> <span class="n">process_name</span> <span class="n">test</span>
</pre></div>
</div>
</div>
<div class="section" id="run-instances-locally">
<span id="run-instances-locally"></span><h4>Run instances locally<a class="headerlink" href="#run-instances-locally" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">run</span> <span class="n">instance</span> <span class="o">&lt;</span><span class="n">label_name</span><span class="o">&gt;</span> <span class="n">local</span> <span class="o">&lt;</span><span class="n">scripts</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>run the scripts from local into the instance. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">instance</span> <span class="n">aws_a</span> <span class="n">local</span> <span class="n">test</span><span class="o">.</span><span class="n">sh</span><span class="p">,</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span><span class="p">,</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</div>
<div class="section" id="run-instances-remotely">
<span id="run-instances-remotely"></span><h4>Run instances remotely<a class="headerlink" href="#run-instances-remotely" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">run</span> <span class="n">instance</span> <span class="o">&lt;</span><span class="n">label_name</span><span class="o">&gt;</span> <span class="n">remote</span> <span class="o">&lt;</span><span class="n">scripts</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>run the scripts from remote instance. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">run</span> <span class="n">instance</span> <span class="n">aws_a</span> <span class="n">remote</span> <span class="n">test</span><span class="o">.</span><span class="n">sh</span><span class="p">,</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span><span class="p">,</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</div>
<div class="section" id="run-local">
<span id="run-local"></span><h4>Run local<a class="headerlink" href="#run-local" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">run</span> <span class="n">local</span> <span class="o">&lt;</span><span class="n">scripts</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>run the scripts from local into the random parallel instance. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">run</span> <span class="n">local</span> <span class="n">test</span><span class="o">.</span><span class="n">sh</span><span class="p">,</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span><span class="p">,</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</div>
<div class="section" id="run-local">
<span id="id1"></span><h4>Run local<a class="headerlink" href="#run-local" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">run</span> <span class="n">remote</span> <span class="o">&lt;</span><span class="n">scripts</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>run the scripts from the remote parallel instances. Make sure all
instances have the required scripts. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">run</span> <span class="n">remote</span> <span class="n">test</span><span class="o">.</span><span class="n">sh</span><span class="p">,</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span><span class="p">,</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Run advanced</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">run</span> <span class="n">advanced</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>this command is running the advanced algorithm. Developing a string
based formulation of the tasks while providing the task in a def and
using the chars | for parallel, ; for sequential and + for adding
results.  In cm4, we only develop simples string to be
executed via ssh on a remote machines. The default setting is running
the local scripts into remote parallel instances.</p>
<p>For example, we define the function in [<code class="docutils literal notranslate"><span class="pre">advanced.py</span></code>]:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="k">def</span> <span class="nf">a</span><span class="p">():</span>
  <span class="k">def</span> <span class="nf">b</span><span class="p">():</span>
  <span class="k">def</span> <span class="nf">c</span><span class="p">():</span>
  <span class="k">def</span> <span class="nf">d</span><span class="p">();</span>
</pre></div>
</div>
<p>then we run the command to get the result:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">awscm</span><span class="o">.</span><span class="n">py</span> <span class="n">advanced</span> <span class="n">a</span><span class="o">|</span><span class="n">b</span><span class="o">|</span><span class="n">c</span><span class="p">;</span><span class="n">d</span><span class="p">;</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="n">c</span><span class="o">+</span><span class="n">d</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="config-py">
<span id="config-py"></span><h3>config.py<a class="headerlink" href="#config-py" title="Permalink to this headline">¶</a></h3>
<p>This python class is reading the configuration of instances. In the
yaml file, we set three types of instances: cloud, cluster and
default, and the [<code class="docutils literal notranslate"><span class="pre">config.py</span></code>] could return relative block information
of them.</p>
</div>
<div class="section" id="resource-py">
<span id="resource-py"></span><h3>resource.py<a class="headerlink" href="#resource-py" title="Permalink to this headline">¶</a></h3>
<p>[<code class="docutils literal notranslate"><span class="pre">resource.py</span></code>] is used to read and manage the default yaml file. In
the class, we provides the read, update, add, remove and review
functionalities for yaml file. And [<code class="docutils literal notranslate"><span class="pre">awscm.py</span></code>] would call these
functions to run the commands.</p>
</div>
<div class="section" id="utility-py">
<span id="utility-py"></span><h3>utility.py<a class="headerlink" href="#utility-py" title="Permalink to this headline">¶</a></h3>
<p>The [<code class="docutils literal notranslate"><span class="pre">utility.pt</span></code>] file contains the functions to do preparation
before running scripts in remote instance. In this python class, we
implement the functions: copy file to instance, copy folder into
instance, list files from the instance, delete file from instance,
delete folder from instance, create folder instance, read file from
instance, download file from instance, download folder from instance
and check whether the process is running or not.</p>
</div>
<div class="section" id="run-py">
<span id="run-py"></span><h3>run.py<a class="headerlink" href="#run-py" title="Permalink to this headline">¶</a></h3>
<p>The [<code class="docutils literal notranslate"><span class="pre">run.py</span></code>] file contains the functions to call the scripts in
remote instance. In this class, we provides three functions: run the
scripts locally to the instance, run the remote scripts in the
instance and run the scripts in parallel instances.</p>
</div>
<div class="section" id="advanced-py">
<span id="advanced-py"></span><h3>advanced.py<a class="headerlink" href="#advanced-py" title="Permalink to this headline">¶</a></h3>
<p>This class is used for the advanced approach to run a string based
formulation of the tasks. Need to be updated later.</p>
</div>
</div>
<div class="section" id="todo-spark">
<span id="todo-spark"></span><h2>TODO - Spark<a class="headerlink" href="#todo-spark" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>[ ] update more functionalities</li>
<li>[ ] try the Spark in AWS instances</li>
<li>[ ] try Spark by using awscm python code</li>
<li>[ ] develop the test code</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ufo.html" class="btn btn-neutral float-right" title="CM4 REST Api" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="README.html" class="btn btn-neutral" title="Cloudmesh cm v4" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Cloudmesh Community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>